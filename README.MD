
# Telegram Support Chat Bot

Простой Telegram бот для поддержки пользователей с веб-интерфейсом для просмотра и отправки сообщений.

---

## Описание

Этот проект реализует Telegram бота, который принимает сообщения от пользователей и позволяет поддержке отвечать им через веб-интерфейс.

- Сообщения сохраняются в базе TinyDB.
- Используется FastAPI для API и веб-интерфейса.
- Веб-интерфейс позволяет видеть список пользователей, читать и отправлять сообщения.
- Асинхронные вызовы для работы с Telegram API и базой.

---

## Требования

- Python 3.8+
- FastAPI
- Uvicorn
- httpx
- tinydb

---


## Запуск

1. Запустить локальный сервер:

```bash
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

2. Запустить [ngrok](https://ngrok.com) для проброса локального сервера в интернет:

```bash
ngrok http 8000
```

3. Настроить вебхук Telegram, заменив `<TOKEN>` и `<NGROK_URL>`:

```bash
curl -X GET "https://api.telegram.org/bot<TOKEN>/setWebhook?url=https://<NGROK_URL>/webhook"
```

4. Открыть веб-интерфейс по адресу:

```
http://localhost:8000/
```

---

## Использование

- Веб-интерфейс позволяет выбрать пользователя из списка и видеть историю переписки.
- Поддержка может отправлять ответы, которые придут пользователю в Telegram.
- Все сообщения сохраняются в базе TinyDB `chat_db.json`.

---

## Переменные окружения

- `TELEGRAM_BOT_TOKEN` — токен вашего Telegram бота.

---

## Структура проекта

```
.
├── main.py            # Основной файл приложения FastAPI
├── chat_db.json       # База данных TinyDB (создаётся автоматически)
├── static/            # Статические файлы для веб-интерфейса (HTML, CSS, JS)
└── README.md          # Это описание
```

---

## Лицензия

MIT


